# Опис змін у обчисленні коефіцієнтів компетентності

## Реалізовані зміни

### 1. Обчислення відстаней
- Відстань кожного експерта до оптимального ранжування вже обчислювалася
- Зберігається в полі `distance` для кожного експерта

### 2. Обчислення співвідношень рангів
**Формула:** `співвідношення = maxDistance / distance`

- Знаходиться найбільша відстань серед усіх експертів
- Для кожного експерта обчислюється співвідношення як `maxDistance / distance`
- Чим менша відстань експерта, тим більше співвідношення
- Зберігається в полі `ratio`

### 3. Обчислення нормованих коефіцієнтів
**Формула:** `нормований = співвідношення / сума(всіх співвідношень)`

- Обчислюється сума всіх співвідношень
- Кожне співвідношення ділиться на цю суму
- Результат: нормовані коефіцієнти, що сумаються до 1.0
- Зберігається в полі `normalized`

### 4. Обчислення ідеальних коефіцієнтів
**Формула:** `ідеальний = нормований / max(нормованих)`

- Знаходиться максимальний нормований коефіцієнт
- Кожен нормований коефіцієнт ділиться на максимум
- Результат: ідеальні коефіцієнти від 0 до 1, де найбільший = 1.00
- Зберігається в полі `ideal`

## Відображення на веб-сайті

Таблиця коефіцієнтів компетентності містить:
- **Експерти** - номер та ім'я експерта
- **ВІДСТАНІ** - відстань до оптимального ранжування
- **Співвідн** - співвідношення рангів (maxDistance / distance)
- **Норм** - нормований коефіцієнт (0.00 - 1.00)
- **Норм, %** - нормований коефіцієнт у відсотках
- **Ідеал** - ідеальний коефіцієнт (0.00 - 1.00, червоним кольором)
- **Ідеал, %** - ідеальний коефіцієнт у відсотках (червоним кольором)

Також відображається:
- **Найбільша відстань серед експертів** - інформаційний блок зі значенням maxDistance

## Приклад обчислення

Припустимо:
- Експерт 1: distance = 6
- Експерт 2: distance = 2
- Експерт 3: distance = 10
- maxDistance = 12

**Співвідношення:**
- Експерт 1: 12/6 = 2.00
- Експерт 2: 12/2 = 6.00
- Експерт 3: 12/10 = 1.20
- Сума = 9.20

**Нормовані:**
- Експерт 1: 2.00/9.20 = 0.22
- Експерт 2: 6.00/9.20 = 0.65
- Експерт 3: 1.20/9.20 = 0.13
- Сума = 1.00 ✓

**Ідеальні:**
- maxNormalized = 0.65
- Експерт 1: 0.22/0.65 = 0.34
- Експерт 2: 0.65/0.65 = 1.00
- Експерт 3: 0.13/0.65 = 0.20

## Файли, що були змінені

1. **server.js** (рядки 576-633):
   - Додано обчислення співвідношень, нормованих та ідеальних коефіцієнтів
   - Додано поле `maxDistanceAmongExperts` у результат

2. **public/js/experts.js** (рядки 615-657):
   - Оновлено таблицю для відображення всіх нових коефіцієнтів
   - Додано інформаційний блок з найбільшою відстанню
   - Додано підсумковий рядок з сумами

